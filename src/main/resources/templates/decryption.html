<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ru">
<head>
    <title>–†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞</title>
    <link rel="stylesheet" href="/styles/styles.css" type="text/css"/>
    <script>
        let attemptCount = 0;
        const maxAttempts = 6;

        function verifyPassword() {
            const userPassword = document.getElementById("passwordInput").value;
            const correctPassword = document.getElementById("correctPassword").value;
            const wrongAttempts = document.getElementById("wrongAttempts");

            if (userPassword === correctPassword) {
                document.getElementById("protectedContent").style.display = '';
                document.getElementById("passwordForm").style.display = 'none';
                document.getElementById("wrongAttempts").style.display = 'none';
            } else {
                attemptCount++;
                document.getElementById("wrongAttempts").style.display = 'block';
                if (attemptCount >= maxAttempts) {
                    location.replace("old.html");
                } else {
                    wrongAttempts.innerHTML = "–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–∞—Ä–æ–ª—å. –û—Å—Ç–∞–ª–æ—Å—å –ø–æ–ø—ã—Ç–æ–∫: " + (maxAttempts - attemptCount);
                }
            }
        }

        function copyToClipboard() {
            let copyText = document.getElementById("textToCopy");
            let copyButton = document.getElementById("copyButton");
            navigator.clipboard.writeText(copyText.textContent).then(function() {
                copyButton.textContent = "–†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞!";
            }, function(err) {
                copyButton.textContent = "–û—à–∏–±–∫–∞ –ø—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏";
            });
        }

        function togglePasswordVisibility() {
            const passwordInput = document.getElementById("passwordInput");
            const eyeIcon = document.getElementById("eyeIcon");
            if (passwordInput.type === "password") {
                passwordInput.type = "text";
                eyeIcon.textContent = "üôà";
            } else {
                passwordInput.type = "password";
                eyeIcon.textContent = "üëÅÔ∏è";
            }
        }
    </script>
</head>
<body>
<h1>–í–∞—à–∞ —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ –≥–æ—Ç–æ–≤–∞</h1>
<div id="passwordForm">
    <h3 id="wrongAttempts" style="display: none"></h3>
    <label for="passwordInput">–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å:</label>
    <div class="password-container">
        <input type="password" id="passwordInput"/>
        <span id="eyeIcon" class="toggle-password" onclick="togglePasswordVisibility()">üëÅÔ∏è</span>
    </div>
    <button onclick="verifyPassword()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
</div>
<div id="protectedContent" style="display: none">
    <p id="textToCopy" th:text="${text}"></p>
    <button id="copyButton" onclick="copyToClipboard()">–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
</div>
<input type="hidden" id="correctPassword" th:value="${password}"/>
</body>
</html>